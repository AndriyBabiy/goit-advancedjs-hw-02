{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = {\n  form: document.querySelector('.form'),\n  firstDelay: document.querySelector('[name=\"delay\"]'),\n  delayStep: document.querySelector('input[name=\"step\"]'),\n  amount: document.querySelector('input[name=\"amount\"]'),\n}\nconst button = document.querySelector('button[type=\"submit\"]');\n\nconst { firstDelay, delayStep, amount} = input;\n\nbutton.addEventListener('click', handlerClick);\n\nfunction handlerClick(evt) {\n  evt.preventDefault();\n\n  setTimeout(() => {\n    for (let i = 0; i < amount.value; i++) {\n      createPromise(\n        i,\n        delayStep.value * i\n      )\n      .then(({ position, delay }) =>\n        iziToastPopup(\n          `✅ Fulfilled promise ${position} in ${delay}ms`,\n          'success'\n          )\n      )\n      .catch(({ position, delay }) =>\n        iziToastPopup(\n          `❌ Rejected promise ${position} in ${delay}ms`,\n          'fail'\n        )\n      );\n\n      if (i === amount.value - 1) {\n        input.form.reset();\n      }\n    }\n  }, firstDelay.value );\n}\n\nfunction createPromise(position, delayStep) {\n  return new Promise((res, rej) => {\n    const shouldResolve = Math.random() > 0.3;\n    const initialDelay = firstDelay.value;\n\n    setTimeout(() => {\n      if (shouldResolve) {\n        res({\n          position: position + 1,\n          delay: delayStep + Number(initialDelay),\n        });\n      } else {\n        rej({\n          position: position + 1,\n          delay: delayStep + Number(initialDelay),\n        });\n      }\n    }, delayStep)\n  })\n}\n\nfunction iziToastPopup(text, type) {\n  let color = type === \"success\" ? 'green' : 'red';\n\n  return iziToast.show({\n      message: `${text}`,\n      color: `${color}`,\n      position: 'topRight',\n    })\n}\n"],"names":["input","button","firstDelay","delayStep","amount","handlerClick","evt","i","createPromise","position","delay","iziToastPopup","res","rej","shouldResolve","initialDelay","text","type","color","iziToast"],"mappings":"wIAGA,MAAMA,EAAQ,CACZ,KAAM,SAAS,cAAc,OAAO,EACpC,WAAY,SAAS,cAAc,gBAAgB,EACnD,UAAW,SAAS,cAAc,oBAAoB,EACtD,OAAQ,SAAS,cAAc,sBAAsB,CACvD,EACMC,EAAS,SAAS,cAAc,uBAAuB,EAEvD,CAAE,WAAAC,EAAY,UAAAC,EAAW,OAAAC,CAAM,EAAIJ,EAEzCC,EAAO,iBAAiB,QAASI,CAAY,EAE7C,SAASA,EAAaC,EAAK,CACzBA,EAAI,eAAc,EAElB,WAAW,IAAM,CACf,QAASC,EAAI,EAAGA,EAAIH,EAAO,MAAOG,IAChCC,EACED,EACAJ,EAAU,MAAQI,CACnB,EACA,KAAK,CAAC,CAAE,SAAAE,EAAU,MAAAC,CAAO,IACxBC,EACE,uBAAuBF,QAAeC,MACtC,SACC,CACJ,EACA,MAAM,CAAC,CAAE,SAAAD,EAAU,MAAAC,CAAO,IACzBC,EACE,sBAAsBF,QAAeC,MACrC,MACD,CACT,EAEUH,IAAMH,EAAO,MAAQ,GACvBJ,EAAM,KAAK,OAGnB,EAAKE,EAAW,MAChB,CAEA,SAASM,EAAcC,EAAUN,EAAW,CAC1C,OAAO,IAAI,QAAQ,CAACS,EAAKC,IAAQ,CAC/B,MAAMC,EAAgB,KAAK,OAAM,EAAK,GAChCC,EAAeb,EAAW,MAEhC,WAAW,IAAM,CACXY,EACFF,EAAI,CACF,SAAUH,EAAW,EACrB,MAAON,EAAY,OAAOY,CAAY,CAChD,CAAS,EAEDF,EAAI,CACF,SAAUJ,EAAW,EACrB,MAAON,EAAY,OAAOY,CAAY,CAChD,CAAS,CAEJ,EAAEZ,CAAS,CAChB,CAAG,CACH,CAEA,SAASQ,EAAcK,EAAMC,EAAM,CACjC,IAAIC,EAAQD,IAAS,UAAY,QAAU,MAE3C,OAAOE,EAAS,KAAK,CACjB,QAAS,GAAGH,IACZ,MAAO,GAAGE,IACV,SAAU,UAChB,CAAK,CACL"}